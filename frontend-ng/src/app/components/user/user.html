<mat-card>
    <h2>{{ loginMode ? 'Login' : 'Register' }}</h2>

    <!-- IMPORTANT: ngSubmit -->
    <form (ngSubmit)="submit()">

        <mat-form-field appearance="outline" style="width:100%">
            <mat-label>Email</mat-label>
            <input matInput type="email" [(ngModel)]="email" name="email" required>
        </mat-form-field>

        <mat-form-field appearance="outline" style="width:100%">
            <mat-label>Password</mat-label>
            <input matInput type="password" [(ngModel)]="password" name="password" required>
        </mat-form-field>

        <!-- Register-only fields -->
        <ng-container *ngIf="!loginMode">

            <mat-form-field appearance="outline" style="width:100%">
                <mat-label>Full Name</mat-label>
                <input matInput [(ngModel)]="full_name" name="full_name" required>
            </mat-form-field>

            <mat-form-field appearance="outline" style="width:100%">
                <mat-label>Phone</mat-label>
                <input matInput [(ngModel)]="phone" name="phone" required>
            </mat-form-field>

            <mat-form-field appearance="outline" style="width:100%">
                <mat-label>Role</mat-label>
                <select matNativeControl [(ngModel)]="role" name="role">
                    <option value="rider">Rider</option>
                    <option value="driver">Driver</option>
                </select>
            </mat-form-field>

            <mat-form-field *ngIf="role === 'driver'" appearance="outline" style="width:100%">
                <mat-label>License Number</mat-label>
                <input matInput [(ngModel)]="license_number" name="license_number">
            </mat-form-field>

        </ng-container>

        <!-- BUTTON MUST BE type="submit" -->
        <button mat-raised-button color="primary" type="submit">
            {{ loginMode ? 'Login' : 'Register' }}
        </button>

    </form>

    <br>

    <button mat-button (click)="toggleMode()">
        {{ loginMode ? 'Create account' : 'Already have an account? Login' }}
    </button>
</mat-card>