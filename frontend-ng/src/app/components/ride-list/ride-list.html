<h2>Available Rides</h2>

<!-- Async pipe automatically updates the view -->
<div *ngIf="rides$ | async as rides">
    <div *ngIf="rides.length === 0">
        No rides available
    </div>

    <mat-card *ngFor="let ride of rides" class="ride-card">
        <mat-card-title>Ride #{{ ride.ride_id }}</mat-card-title>
        <mat-card-content>
            <p><strong>Pickup:</strong> {{ ride.pickup_location }}</p>
            <p><strong>Drop:</strong> {{ ride.drop_location }}</p>
            <p><strong>Status:</strong> {{ ride.status }}</p>
        </mat-card-content>
        <mat-card-actions>
            <button mat-raised-button color="primary" *ngIf="ride.status === 'requested'"
                (click)="acceptRide(ride.ride_id)">
                Accept Ride
            </button>
            <button mat-button [routerLink]="['/ride', ride.ride_id]">
                View Details
            </button>
        </mat-card-actions>
    </mat-card>
</div>

<p *ngIf="!(rides$ | async)">Loading rides...</p>